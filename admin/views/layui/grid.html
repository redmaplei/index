
<div class="layui-fluid">
    <div class="layui-row">
      <div class="layui-col-xs12">
        <div class="layui-card">
          <div class="layui-card-header">
            文章：
            
          </div>
          

          <div class="layui-card-body">

            
              <div class="panel panel-default">
                  <!-- Default panel contents -->
                  <div class="panel-heading bg-primary" style="color:red ;">
                        MARKDOWN
                
                        <button id="addmd" class="btn btn-primary btn-sm" style="float:right;margin: 0 0;"  onclick="addmd()">
                                添加文章
                        </button>

                  </div>
                
                  <!-- Table -->
                  <table id="mdtable" class="table " style="margin-top:10px;">
                   <thead>
                      <tr class="success">
                          <th width="5%" style="text-align:center;">序号</th>
                          <th width="20%" style="text-align:center;">标题</th>
                          <th width="40%" style="text-align:center;">描述</th>
                          <th width="20%" style="text-align:center;">时间</th>
                          <th width="15%" style="text-align:center;">操作</th>
                      </tr>
                      </thead>
                      <tbody  v-for="article in articles">
                            <tr >
                                <td style="text-align:center;" > {{ article.id }} </td>
                                <td id="blogtitletd" style="text-align:center;"> {{ article.blogtitle }}  </td>
                                <td style="text-align:center;"> {{ article.markdowninfo }} </td>
                                <td style="text-align:center;"> {{ article.writetime }} </td>
                                <td style="text-align:center;">
                                <div class="btn-group flex-btn-group-container"> 
                                    <button id="viewbutton" class="btn btn-info btn-sm" @click="jumpreadmd(article.blogtitle)">
                                        查看
                                    </button>
                                    <button class="btn btn-primary btn-sm" @click="editormd(article.blogtitle)">
                                        编辑
                                    </button>
                                    <button class="btn btn-danger btn-sm"  @click="deletemd(article.blogtitle)">
                                        删除
                                    </button>
                                </div>
                                </td>
                            </tr>
                                  
                      </tbody>

                  </table>
                  
                </div>
                
               
                
           
          </div>

        </div>
      </div>
    </div>
  </div>
  
  <div id="addmd_div" style="display:none;">

    <!-- style="width:100%;" -->

  <div class="row " >
        <div class="col-lg-6" style="width:50%;float: left;">
          <div class="input-group" >
            <span class="input-group-btn">
              <button class="btn btn-default btn-primary" type="button">标题</button>
            </span>
            <input type="text" v-model="article.blogtitle" class="form-control blogtitle" placeholder="Title...">
            <span> {{ article.blogtitle }} </span>
        </div><!-- /input-group -->
        </div><!-- /.col-lg-6 -->

        <div class="col-lg-6" style="width:50%;float: left;">
          <div class="input-group">
            <span class="input-group-btn">
              <button class="btn btn-default btn-primary markdowninfo" type="button">描述</button>
            </span>
            <input type="text" class="form-control" v-model="article.markdowninfo" placeholder="Info...">
          </div><!-- /input-group -->
        </div><!-- /.col-lg-6 -->

        <div class="col-lg-6" style="width:45%;float: left;margin-top: 20px;">
                <div class="input-group">
                  <span class="input-group-btn">
                    <button class="btn btn-default btn-primary catogery" type="button">分类</button>
                  </span>
                  <input type="text" class="form-control" v-model="article.catogery"  placeholder="catogery...">
                </div><!-- /input-group -->
              </div><!-- /.col-lg-6 -->

        <div class="col-lg-6" style="width:55%;float: left; margin-top: 20px;">
            <div class="input-group">
              <span class="input-group-btn">
                <button class="btn btn-default btn-primary writetime" type="button">时间</button>
              </span>
              <input type="datetime-local" class="form-control" v-model="article.writetime"  placeholder="Time...">
            </div><!-- /input-group -->
        </div><!-- /.col-lg-6 -->

        <div class="col-lg-6" style="width:99%;float: left;margin-top: 20px;">
            <div class="input-group">
              <span class="input-group-btn">
                <button class="btn btn-default btn-primary markdownstring" type="button">内容</button>
              </span>
              <input type="text" class="form-control"  v-model="article.markdownstring"  placeholder="Content...">
            </div><!-- /input-group -->
        </div><!-- /.col-lg-6 -->

       
        <div class="col-lg-6" style="width:99%;float: left;margin-top: 20px;">
            <div class="input-group">
              <span class="input-group-btn">
                <button class="btn btn-default btn-primary src" type="button">地址</button>
              </span>
              <input type="text" class="form-control" placeholder="Src...">
            </div><!-- /input-group -->
        </div><!-- /.col-lg-6 -->

      </div><!-- /.row -->


        

    </div >
    <p id="ts">
            {{ article.a }}
      </p>
<script>

var urlread = "http://127.0.0.1:8080/md/getnewmd";

$.ajax({
    url:urlread,
    type:'GET',
    dataType:'json',
    contentType:'application/json; charset=UTF-8',
    success:function (data) {
        mdvue.articles = data;
    },
    error: function() {
        console.log("xsss");
    }

});

var mdvue = new Vue({

    el:'#mdtable',
    data: {
        articles: [
            {id:"23",blogtitle:"asds",writetime:"",markdowninfo:""},
            {id:"234",blogtitle:"区块链",writetime:"",markdowninfo:""},
        ],
    },
    methods:{
        
        jumpreadmd: function(blogtitle) {
            localStorage.setItem("blogtitle",blogtitle);
            window.open("../html/read.html");
            // window.location.href="../html/blogread.html";

        },
        
        editormd: function(blogtitle) {
            alert(blogtitle);
        },

        deletemd: function(blogtitle) {
            alert("删除" + blogtitle + "? 暂时不删除");
        }
    }

});

var addmdvue = new Vue({
    el:'#ts',
    data: {
        article: [
            {id:"23",blogtitle:"asds",writetime:"",markdowninfo:""},
        ],
        a:"xxxxxcvv",
    },
    
});

// var addmdvue = new Vue({

//     // el:'#addmd_div', 
//     el:'#ts',
//     data: {
//         article: [
//             {blogtitle:"xxxxx",writetime:"v",markdowninfo:"c",src:"",catogery:""},
//          ],
         
//     },
//     methods: {
//         getmd: function() {
            
//         },
//     }

// });

function addmd() {

    var s = $('#addmd_div').html();
    // var article = {blogtitle:"",writetime:"",markdowninfo:"",markdownstring:""};
    

    // alert(s);
    layer.open({
        title:"添加文章",
        btn: ['确定', '取消'],
        area: ['575px', '350px'], //宽高
        // content: '<div style:"width:100%; height:300px;" > </div>',
        content: s,
        
        btn1: function() {
            // article.blogtitle = $('#title_input').html();
            // article.markdowninfo = $('.markdowninfo').text();
            // console.log(article.blogtitle);
            console.log(addmdvue.article.blogtitle);

            var urlread = "http://127.0.0.1:8080/md/uploadmd";

            // $.ajax({
            //     url:urlread,
            //     type:'GET',
            //     dataType:'json',
            //     data:{markdown:addmdvue.article},
            //     contentType:'application/json; charset=UTF-8',
            //     success:function (data) {
            //         mdvue.articles = data;
            //         // console.log("dfsdfs");
            //         // console.log(mdvue.articles);
            //     },
            //     error: function() {
            //         console.log("xsss");
            //     }

            // });

            layer.msg("添加成功");
            // location.reload();
        },
        btn2: function() {

        }
    })
}

</script>
